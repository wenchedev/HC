import{j as t,T as he,B as v,o as Se,q as Re,s as K,l as ue,I as Le,r as A,t as ve,v as Ae,D as xe,w as U,x as De,y as Ne,A as X,h as Me,E as Be,R as Pe,m as Z,G as se,H as Ee,K as He,L as fe,S as ge,U as ye,V as u,W as je,X as s,Y as pe}from"./vendor-ByMbCiu8.js";function xt(){const e=t.jsx("div",{className:"pl-4",children:t.jsxs("footer",{className:"text-sm",children:[moment().local().year()," Homecare Realty Ltd. All Rights Reserved."]})}),n=t.jsx("a",{href:"mailto:Info@homecarerealty.com",className:"pr-4",children:t.jsx(v,{label:"Email Support",text:!0})});return t.jsx("div",{className:"sticky bottom-0 w-full",children:t.jsx(he,{className:"footer-bar w-full px-0 mx-0 align-items-center ",start:e,end:n,style:{backgroundColor:"#ffffff"}})})}const $e=(e,n)=>({setValue:({type:l,location:a,value:d})=>{e(n(f=>_.set(f,a,d)),!1,{type:l||"SET_VALUE",location:a,value:d})},setVisible:(l,a)=>{e(n(d=>_.set(d,l,a)),!1,{type:"SET_VISIBLE"})}}),J={company:{nameLeft:"HOMECARE REALTY LTD.",addrLine1:"214, 222 16 Ave NE, Calgary T2E 1J8",phone:"Tel: 587-432-1588",web:"www.homecarerental.ca",tagline:"Your Local Property Management Professionals!"},selectedMonth:new Date,monthlyWorksheet:[],monthlyDataMapped:[],monthlyPdfDataShape:null,emailPreview:null},Ie=Se(Re(e=>({...J,...$e(e,K),resetState:()=>{e(K(n=>J),!1,{type:"RESET_STATE"})},resetStateByLocation:n=>{e(K(l=>_.set(l,n,J[n])),!1,{type:"RESET_LOCATION"})}}),{name:"Monthly"}));function ft(){const{setValue:e,resetState:n}=Ie(),l=ue(),a=t.jsx("div",{className:"pl-2",children:t.jsx(Le,{alt:"home-care-logo",height:"75",src:"/HC/201512office_logo.png"})}),d=t.jsx("div",{className:"flex mr-4",children:t.jsx(v,{rounded:!0,outlined:!0,severity:"secondary",onClick:()=>{n(),localStorage.clear(),l("/login")},children:"Logout"})});return t.jsx(he,{className:"header-bar w-full p-0 m-0 align-items-center",start:a,end:d,style:{backgroundColor:"#ffffff"}})}function gt({children:e}){const n=ue(),[l,a]=A.useState(!1);return A.useEffect(()=>{localStorage.getItem("token")?a(!0):n("/login")},[n]),l?t.jsx("div",{className:"flex w-full h-full",children:e}):null}function _e(e){const l=(""+e).replace(/\D/g,"").match(/^(1|)?(\d{3})(\d{3})(\d{4})$/);return l?[l[1]?"+1 ":"","(",l[2],") ",l[3],"-",l[4]].join(""):null}function Oe(e){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2}).format(e)}function yt(e){return(e||"").replace(/[\/\\?%*:|"<>]/g,"-").replace(/\s+/g," ").trim()}function V(e){return e?(Math.round((e+Number.EPSILON)*100)/100).toFixed(2):"0.00"}function jt(e=2){let n=0;const l=[],a=()=>{if(n>=e||l.length===0)return;n++;const{fn:d,resolve:f,reject:c}=l.shift();Promise.resolve().then(d).then(f,c).finally(()=>{n--,a()})};return d=>new Promise((f,c)=>{l.push({fn:d,resolve:f,reject:c}),a()})}function pt(e,n){const l=URL.createObjectURL(e),a=document.createElement("a");a.href=l,a.download=n,a.click(),URL.revokeObjectURL(l)}async function bt(e){if(e)try{await fetch("https://oauth2.googleapis.com/revoke",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({token:e})})}finally{}}function We(e){return new Promise((n,l)=>{const a=new FileReader;a.onerror=l,a.onload=()=>{const d=a.result,f=String(d).split(",")[1]||"";n(f)},a.readAsDataURL(e)})}function Fe(e){return btoa(unescape(encodeURIComponent(e))).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}function ze(e){const n=unescape(encodeURIComponent(e));return`=?UTF-8?B?${btoa(n)}?=`}async function Ct({to:e,subject:n,htmlBody:l,pdfBlob:a,filename:d="statement.pdf"}){var b;const f=`----=_Part_${crypto.randomUUID()}`,c=await We(a),g=[`To: ${e}`,`Subject: ${ze(n)}`,"MIME-Version: 1.0",`Content-Type: multipart/mixed; boundary="${f}"`].filter(Boolean),x=[`--${f}`,'Content-Type: text/html; charset="UTF-8"',"Content-Transfer-Encoding: 7bit","",l,"",`--${f}`,`Content-Type: application/pdf; name="${d}"`,`Content-Disposition: attachment; filename="${d}"`,"Content-Transfer-Encoding: base64","",((b=c.match(/.{1,76}/g))==null?void 0:b.join(`\r
`))||c,"",`--${f}--`,""],w=`${g.join(`\r
`)}\r
\r
${x.join(`\r
`)}`;return Fe(w)}function ke(e){if(!e)return"";const n=String(e).replace(/\D/g,""),l=n.length===11&&n.startsWith("1")?n.slice(1):n;if(l.length!==10)return e;const a=l.slice(0,3),d=l.slice(3,6),f=l.slice(6);return`(${a}) ${d}-${f}`}const ae=e=>e?moment().format("MMM DD YYYY, HH:MM"):"",Ue=e=>String(e||"").trim().toLowerCase().replace(/\s+/g," ");function Y(e){return String(e).replaceAll("&","&amp;").replaceAll("<","&lt;").replaceAll(">","&gt;").replaceAll('"',"&quot;").replaceAll("'","&#039;")}const Ye=({kind:e="monthly",label:n,address:l})=>e==="monthly"?`${n?` ${n}`:""} Monthly Statement for ${Y(l)}`:`${n?` ${n}`:""} Annual Report for ${Y(l)}`;async function Tt({gmailToken:e,emailAddresses:n,subjectPrefix:l,maxMessagesToScan:a=2e3,metadataConcurrency:d=4,extraQuery:f=""}){if(!e)throw new Error("Missing gmailToken");const c=(n||[]).map(h=>String(h||"").trim().toLowerCase()).filter(Boolean);if(c.length===0)return{byRecipient:{},scanned:0,matchedMessages:0};if(!(l!=null&&l.trim()))throw new Error("Missing subjectPrefix");const g=new Set(c);Object.fromEntries(c.map(h=>[h,{messages:[],total:0,latestDate:null}]));const x=h=>new Promise(j=>setTimeout(j,h)),w=h=>String(h).replaceAll('"','\\"'),b=async(h,j)=>{const C=[];let D;for(;;){const N=new URL("https://gmail.googleapis.com/gmail/v1/users/me/messages");N.searchParams.set("q",h),N.searchParams.set("maxResults",String(Math.min(500,j-C.length))),D&&N.searchParams.set("pageToken",D);const R=await fetch(N.toString(),{method:"GET",headers:{Authorization:`Bearer ${e}`}});if(!R.ok){const z=await R.text().catch(()=>"");throw new Error(`Gmail list failed (${R.status}): ${z||R.statusText}`)}const E=await R.json(),F=(E.messages||[]).map(z=>z.id).filter(Boolean);if(C.push(...F),!E.nextPageToken||C.length>=j)break;D=E.nextPageToken}return C.slice(0,j)},$=`in:sent ${`subject:"${w(l)}"`} ${f}`.trim().replace(/\s+/g," "),M=await b($,a),B=async h=>{const j=new URL(`https://gmail.googleapis.com/gmail/v1/users/me/messages/${h}`);j.searchParams.set("format","metadata"),j.searchParams.append("metadataHeaders","To"),j.searchParams.append("metadataHeaders","Date"),j.searchParams.append("metadataHeaders","Subject");const C=await fetch(j.toString(),{method:"GET",headers:{Authorization:`Bearer ${e}`}});if(!C.ok){const D=await C.text().catch(()=>"");throw new Error(`Gmail get failed (${C.status}) for ${h}: ${D||C.statusText}`)}return C.json()},T=(h,j)=>{var N;const D=(((N=h==null?void 0:h.payload)==null?void 0:N.headers)||[]).find(R=>((R==null?void 0:R.name)||"").toLowerCase()===j.toLowerCase());return(D==null?void 0:D.value)||""},O=h=>h?(String(h).match(/[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}/gi)||[]).map(C=>C.toLowerCase()):[],y=await(async(h,j,C)=>{let D=0;const N=new Array(h.length),R=Array.from({length:Math.max(1,j)},async()=>{for(;D<h.length;){const E=D++;N[E]=await C(h[E],E)}});return await Promise.all(R),N})(M,d,async(h,j)=>(j>0&&j%25===0&&await x(120),B(h))),m={};for(let h=0;h<y.length;h++){const j=y[h],C=O(T(j,"To")),D=T(j,"Subject"),N=T(j,"Date")||null,R=Ue(D);if(!R)continue;const E=m[R]||(m[R]={tos:new Set,latestSentDate:null});for(const F of C)g.has(F)&&E.tos.add(F);if(N){const F=E.latestSentDate?Date.parse(E.latestSentDate):null,z=Date.parse(N);(!F||Number.isFinite(z)&&z>F)&&(E.latestSentDate=N)}}return{bySubject:m,scanned:M.length}}const Ge="664828736276-qdp3rvimsthq6srnprmijndhm3mhs5hq.apps.googleusercontent.com",Ve=()=>({name:"HOMECARE REALTY LTD.",addressLines:["Suite 214, 222-16 Ave NE","Calgary, Alberta T2E 1J8"],tel:"587-432-1588",website:"https://www.homecarerealty.com",tagline:"Your Local Property Management Professionals!",logoSrc:"/HC/201512office_logo.png"});function wt(e){const n={filterHeader:{operator:Ae.AND,constraints:[{value:null,matchMode:ve.STARTS_WITH}]},filterText:"Filter By",columnBody:(y,m)=>_.get(y,m.field)},l={date:(y,m)=>{const h=_.get(y,m.field);if(h)return moment.utc(h).format("MMM DD, YYYY")},dateTime:(y,m)=>{const h=_.get(y,m.field);if(h)return moment.utc(h).local().format("MMM DD YYYY h:mm a")},checkFormatter:(y,m)=>_.get(y,m.field)==="Y"?t.jsx("div",{className:"flex justify-content-center",children:t.jsx("i",{className:"pi pi-check"})}):null,currency:(y,m)=>{const h=_.get(y,m.field);return Oe(h)},phone:(y,m)=>{const h=_.get(y,m.field);if(h)return _e(h)},mb:(y,m)=>{const h=_.get(y,m.field);if(h)return(h/1e5).toFixed(2)},checkBox:(y,m)=>{const h=_.get(y,m.field);return t.jsx("div",{className:"flex justify-content-center",children:t.jsx(Ne,{checked:h})})}},a=A.useRef(null),d=y=>{a.current.exportCSV({selectionOnly:y})},[f,c]=A.useState(null),[g,x]=A.useState(null),[w,b]=A.useState(null),[S,$]=A.useState(null),M={};A.useEffect(()=>{e.showLoadLayoutDropDown},[e.showLoadLayoutDropDown]),A.useEffect(()=>{a.current&&a.current.restoreState()},[]);const B=y=>_.map(y,m=>(m.filterHeader?M[m.field]=m.filterHeader:M[m.field]=n.filterHeader,t.jsx(U,{body:m.formatter&&l[m.formatter]?l[m.formatter]:m.body?m.body:n.columnBody,editor:m.editor?m.editor:null,field:m.field,filter:Object.hasOwn(m,"filter")?m.filter:!0,filterElement:m.filterTemplate?m.filterTemplate:null,filterField:m.field,filterPlaceholder:m.filterText?m.filterText:n.filterText,header:m.header,sortable:Object.hasOwn(m,"sortable")?m.sortable:!0,style:m.style,bodyClassName:m.bodyClassName,className:m.className},m.field))),T=y=>{},O=()=>S,P=()=>{let y=[];return e.header&&(y=e.header),e.tableExport&&(y=[...y,t.jsx(v,{"data-pr-tooltip":"CSV",icon:"pi pi-file-excel",label:"Export CSV",size:"small",onClick:()=>d(!1)},De(4))]),t.jsxs("div",{className:"flex flex-row flex-wrap align-items-center justify-content-between gap-2",children:[e!=null&&e.headerCaption?t.jsx("div",{className:"flex text-2xl ",children:e.headerCaption}):e.injectHeader?t.jsx("div",{className:"flex",children:e.injectHeader}):t.jsx("div",{}),t.jsx("div",{className:"flex flex-row flex-wrap gap-2",children:y})]})};return t.jsx("div",{className:"flex-grow-1 flex-direction-row",children:t.jsx(xe,{className:e.className,columnResizeMode:Object.hasOwn(e,"columnResizeMode")?e.columnResizeMode:"expand",currentPageReportTemplate:"{first} to {last} of {totalRecords}",customRestoreState:O,customSaveState:T,dataKey:"id",filters:Object.hasOwn(e,"filters")?e.filters:f,header:P(),loading:e.loading,paginator:Object.hasOwn(e,"paginator")?e.paginator:!0,paginatorTemplate:Object.hasOwn(e,"paginatorTemplate")?e.paginatorTemplate:"FirstPageLink PrevPageLink CurrentPageReport NextPageLink LastPageLink RowsPerPageDropdown",ref:a,removableSort:Object.hasOwn(e,"removableSort")?e.removableSort:!0,reorderableColumns:Object.hasOwn(e,"reorderableColumns")?e.reorderableColumns:!0,resizableColumns:Object.hasOwn(e,"resizableColumns")?e.resizeableColumns:!0,rows:e.rows?e.rows:50,rowsPerPageOptions:e.rowsPerPageOptions?e.rowsPerPageOptions:[5,10,25,50,100],showGridlines:Object.hasOwn(e,"showGridLines")?e.showGridLines:!0,sortMode:e.sortMode?e.sortMode:"multiple",stateStorage:"custom",stripedRows:Object.hasOwn(e,"stripedRows")?e.stripedRows:!0,value:e.value,...e.overrides,children:e.columns?B(e.columns):e.children})})}const St=({id:e,blob:n,filename:l,to:a,landlordName:d,address:f,propertyID:c,kind:g,label:x,createdAt:w,status:b,email:S})=>({landlord:{name:d??"",email:a??""},property:{address:f??"",propertyID:c??""},statement:{kind:g??"",monthLabel:x??"",yearLabel:x??""},agent:{name:localStorage.getItem("name"),phone:localStorage.getItem("mobile")},org:{email:localStorage.getItem("email")},attachment:{filename:l??"",blob:n??null}}),Rt=({landlord:e={},property:n={},statement:l={},agent:a={},org:d={},attachment:f=null})=>{const c=(O,P="")=>O==null?P:String(O),g=c(e.name,"Landlord"),x=c(e.email,""),w=c(n.address,""),b=l.kind==="yearly"?"yearly":"monthly",S=c(b==="monthly"?l.monthLabel:l.yearLabel,""),$=Ye({kind:b,label:S,address:w}),M=c(a.name,""),B=c(a.phone,"");c(d.name,""),c(d.email,"");const T=`
            <div style="font-family:Arial,Helvetica,sans-serif;font-size:14px;line-height:1.5;color:#111">
            <p>Hi ${Y(g)},</p>

            <p>
                Please find attached the ${b==="monthly"?"Monthly Statement":"Annual Report"}${S?` (${Y(S)})`:""}
                ${w?`for ${Y(w)}`:""}.
            </p>

            <p>If you have any questions, feel free to reply to this email.</p>

            <p style="margin-top:18px">
                Thank you,<br/>
                ${M?`${Y(M)}<br/>`:""}
                Realtor/Property Manager<br/>
                ${B?`${Y(ke(B))}<br/>`:""}
            </p>
            </div>
        `.trim();return{landlordName:g,landlordEmail:x,address:w,kind:b,periodLabel:S,subject:$,html:T}};function Lt({visible:e,onHide:n,onToken:l}){const[a,d]=A.useState("idle"),[f,c]=A.useState(""),g=A.useRef(null),x=A.useMemo(()=>Ge,[]);A.useEffect(()=>{if(!e)return;c(""),d("idle");const S=()=>typeof window<"u"&&window.google&&window.google.accounts&&window.google.accounts.oauth2,$=()=>S()?(g.current=window.google.accounts.oauth2.initTokenClient({client_id:x,scope:["https://www.googleapis.com/auth/gmail.send","https://www.googleapis.com/auth/gmail.readonly"].join(" "),callback:T=>{if(T!=null&&T.error){d("error"),c(T.error_description||T.error);return}d("ready"),l==null||l(T),n==null||n()},error_callback:T=>{d("error"),c((T==null?void 0:T.type)||"OAuth popup failed")}}),d("ready"),!0):!1;let M=0;const B=setInterval(()=>{M+=1,($()||M>40)&&(M>40&&!S()&&(d("error"),c("Google Identity Services failed to load.")),clearInterval(B))},100);return()=>clearInterval(B)},[e,x,n,l]);const w=()=>{var S;c(""),d("requesting");try{(S=g.current)==null||S.requestAccessToken({prompt:"select_account"})}catch($){d("error"),c(($==null?void 0:$.message)||"Failed to start OAuth flow.")}},b=t.jsxs("div",{className:"flex justify-content-end gap-2",children:[t.jsx(v,{label:"Cancel",className:"p-button-text",onClick:n}),t.jsx(v,{label:a==="requesting"?"Opening…":"Continue with Google",icon:"pi pi-google",onClick:w,disabled:a!=="ready"})]});return t.jsx(X,{header:"Sign in with Google",visible:e,onHide:n,footer:b,style:{width:"28rem"},modal:!0,draggable:!1,children:t.jsxs("div",{className:"flex flex-column gap-3",children:[t.jsx("div",{children:"This will open a Google popup to authorize your account."}),a==="idle"||a==="requesting"?t.jsxs("div",{className:"flex align-items-center gap-2",children:[t.jsx(Me,{style:{width:20,height:20}}),t.jsx("span",{children:a==="idle"?"Loading Google…":"Waiting for popup…"})]}):null,a==="error"?t.jsx(Be,{severity:"error",text:f||"OAuth failed."}):null]})})}const qe=(e=0)=>{const n=Number(e)||0;if(n<1024)return`${n} B`;const l=n/1024;return l<1024?`${l.toFixed(1)} KB`:`${(l/1024).toFixed(1)} MB`},Qe=(e,n)=>{const l=URL.createObjectURL(e),a=document.createElement("a");a.href=l,a.download=n||"attachment.pdf",document.body.appendChild(a),a.click(),a.remove(),setTimeout(()=>URL.revokeObjectURL(l),6e4)};function vt({visible:e,onHide:n,preview:l}){var f;const a=A.useMemo(()=>l!=null&&l.pdfBlob?URL.createObjectURL(l.pdfBlob):null,[l==null?void 0:l.pdfBlob]);Pe.useEffect(()=>()=>{a&&URL.revokeObjectURL(a)},[a]);const d=t.jsxs("div",{className:"flex gap-2 justify-content-end",children:[t.jsx(v,{label:"Download PDF",icon:"pi pi-download",outlined:!0,onClick:()=>Qe(l.pdfBlob,l.filename),disabled:!(l!=null&&l.pdfBlob)}),t.jsx(v,{label:"Close",icon:"pi pi-times",onClick:n})]});return t.jsx(X,{header:"Email preview",visible:e,style:{width:"min(1100px, 95vw)"},modal:!0,onHide:n,footer:d,maximizable:!0,children:l?t.jsxs("div",{className:"flex flex-column gap-3",children:[t.jsxs("div",{className:"grid",children:[t.jsxs("div",{className:"col-12 md:col-6",children:[t.jsx("label",{className:"block mb-1",style:{fontWeight:600},children:"To"}),t.jsx(Z,{value:l.to||"",readOnly:!0,className:"w-full"})]}),t.jsxs("div",{className:"col-12 md:col-6",children:[t.jsx("label",{className:"block mb-1",style:{fontWeight:600},children:"From"}),t.jsx(Z,{value:l.from||"",readOnly:!0,className:"w-full"})]}),t.jsxs("div",{className:"col-12",children:[t.jsx("label",{className:"block mb-1",style:{fontWeight:600},children:"Subject"}),t.jsx(Z,{value:l.subject||"",readOnly:!0,className:"w-full"})]})]}),t.jsxs("div",{className:"grid",children:[t.jsxs("div",{className:"col-12",children:[t.jsx("div",{className:"flex align-items-center justify-content-between mb-2",children:t.jsx("div",{style:{fontWeight:600},children:"Body"})}),t.jsx("div",{style:{border:"1px solid var(--surface-border)",borderRadius:8,padding:12,maxHeight:"60vh",overflow:"auto",background:"var(--surface-0)"},dangerouslySetInnerHTML:{__html:l.htmlBody||""}})]}),t.jsxs("div",{className:"col-12",children:[t.jsx("div",{className:"mb-2",style:{fontWeight:600},children:"PDF attachment"}),t.jsx("div",{style:{border:"1px solid var(--surface-border)",borderRadius:8,padding:12,background:"var(--surface-0)"},children:t.jsxs("div",{className:"flex flex-column gap-2",children:[t.jsxs("div",{children:[t.jsx("div",{style:{fontWeight:600},children:l.filename||"attachment.pdf"}),t.jsx("div",{style:{opacity:.7},children:qe((f=l.pdfBlob)==null?void 0:f.size)})]}),a?t.jsx("iframe",{title:"pdf-preview",src:a,style:{width:"100%",height:"55vh",border:"1px solid var(--surface-border)",borderRadius:8,background:"white"}}):t.jsx("div",{style:{opacity:.7},children:"No PDF selected."})]})})]})]})]}):t.jsx("div",{style:{padding:12},children:"No preview data."})})}function At({visible:e,onHide:n,kind:l,onKindChange:a,gmailToken:d,onOAuthClick:f,connectedGmail:c,items:g=[],bulk:x,onBuildAll:w,onSendAll:b,onCheckStatus:S,onPreviewOne:$,onTestOne:M,onSendOne:B,onCancelBulk:T,onDownloadOne:O}){const P=A.useMemo(()=>{const o=g.length,H=g.filter(p=>{var L;return((L=p==null?void 0:p.status)==null?void 0:L.state)==="sent"}).length,I=g.filter(p=>{var L;return((L=p==null?void 0:p.status)==null?void 0:L.state)==="failed"}).length,k=g.filter(p=>{var L;return((L=p==null?void 0:p.status)==null?void 0:L.state)==="sending"}).length,q=g.filter(p=>{var L;return((L=p==null?void 0:p.status)==null?void 0:L.state)==="building"}).length,Ce=g.filter(p=>{var L;return((L=p==null?void 0:p.status)==null?void 0:L.state)==="ready"}).length,Te=g.filter(p=>{var L,le;return!((L=p==null?void 0:p.status)!=null&&L.state)||((le=p==null?void 0:p.status)==null?void 0:le.state)==="pending"}).length,ne=H+I,we=o>0?Math.round(ne/o*100):0;return{total:o,sent:H,failed:I,sending:k,building:q,ready:Ce,pending:Te,done:ne,progress:we}},[g]),y=(x==null?void 0:x.total)??P.total,m=(x==null?void 0:x.done)??P.done,h=y>0?Math.round(m/y*100):0,[j,C]=A.useState([]),D=t.jsxs("div",{className:"flex flex-column gap-2 w-full",children:[t.jsxs("div",{className:"flex flex-wrap align-items-center justify-content-between",children:[t.jsxs("div",{className:"text-xl font-semibold",children:["Emailing Queue - ",c?"Sent from: "+c:"Please connect Gmail first"]}),t.jsxs("div",{className:"flex gap-2 flex-wrap",children:[t.jsx(v,{label:"Build Email",icon:"pi pi-file",outlined:!0,disabled:!w,onClick:w}),(x==null?void 0:x.running)&&t.jsx(v,{label:"Cancel Build",icon:"pi pi-times",outlined:!0,severity:"danger",onClick:T}),t.jsxs("div",{className:"flex  flex-column gap-2",children:[t.jsxs("div",{className:"flex align-items-center",children:[t.jsx(se,{inputId:"email-monthly",name:"kind",value:"monthly",onChange:o=>a(o.value),checked:l==="monthly"}),t.jsx("label",{htmlFor:"email-monthly",className:"ml-2",style:{fontSize:"1rem",fontWeight:600},children:"Monthly Statement"})]}),t.jsxs("div",{className:"flex align-items-center mr-4",children:[t.jsx(se,{inputId:"email-yearly",name:"kind",value:"yearly",onChange:o=>a(o.value),checked:l==="yearly"}),t.jsx("label",{htmlFor:"email-yearly",className:"ml-2",style:{fontSize:"1rem",fontWeight:600},children:"Yearly Statement"})]})]}),t.jsx(v,{outlined:!0,icon:"pi pi-google",label:d?"Disconnect":"Connect Gmail",severity:d?"danger":"help",onClick:f,className:"ml-4 mr-3"},"gmail-oAuth"),t.jsx(v,{label:"Send All",icon:"pi pi-send",disabled:!(g!=null&&g.length)||!b||!c||!!(x!=null&&x.running)||j.length<=0,onClick:async()=>{await(b==null?void 0:b(j)),C([])},tooltip:c?(g==null?void 0:g.length)<=0?'Please click "Build Email" to generate emails first':j.length<=0?"Please select at least one email to send":`Click to send selected ${j.length} emails`:"Please connect to gmail first",tooltipOptions:{position:"top",showOnDisabled:!0},loading:x==null?void 0:x.running}),t.jsx(v,{label:"Check Status",icon:"pi pi-sync",outlined:!0,disabled:!(g!=null&&g.length)||!S||!c,onClick:async()=>{await S(g),C([])},tooltip:c?"Check if already sent the emails":"Please connect to gmail first",tooltipOptions:{position:"top",showOnDisabled:!0},loading:x==null?void 0:x.running})]})]}),x!=null&&x.running?t.jsxs("div",{className:"mt-2",children:[t.jsxs("div",{className:"flex justify-content-between align-items-center mb-1",children:[t.jsx("small",{className:"text-600",children:(x==null?void 0:x.label)||"Processing…"}),t.jsxs("small",{className:"text-600",children:[m,"/",y]})]}),t.jsx(Ee,{value:h})]}):null,t.jsx("div",{className:"flex align-items-center justify-content-start gap-3 mt-4",children:t.jsxs("div",{className:"flex flex-wrap gap-2 text-sm",children:[t.jsxs("span",{children:[t.jsx("b",{children:"Total:"})," ",P.total]}),t.jsxs("span",{children:[t.jsx("b",{children:"Pending:"})," ",P.pending]}),t.jsxs("span",{children:[t.jsx("b",{children:"Building:"})," ",P.building]}),t.jsxs("span",{children:[t.jsx("b",{children:"Ready:"})," ",P.ready]}),t.jsxs("span",{children:[t.jsx("b",{children:"Sending:"})," ",P.sending]}),t.jsxs("span",{children:[t.jsx("b",{children:"Sent:"})," ",P.sent]}),t.jsxs("span",{children:[t.jsx("b",{children:"Failed:"})," ",P.failed]})]})})]}),N=o=>{var I,k,q;const H=Ke((I=o==null?void 0:o.status)==null?void 0:I.state);return t.jsxs("div",{className:"flex flex-column gap-1",children:[t.jsx(He,{severity:H.severity,value:H.label,icon:H.icon}),(k=o==null?void 0:o.status)!=null&&k.error?t.jsx("small",{className:"text-red-500",children:ie(o.status.error,28,10)}):(q=o==null?void 0:o.status)!=null&&q.sentAt?t.jsxs("small",{className:"text-500",children:["Sent: ",ae(o.status.sentAt)]}):o!=null&&o.createdAt?t.jsxs("small",{className:"text-500",children:["Created: ",ae(o.createdAt)]}):null]})},R=o=>t.jsxs("div",{className:"flex flex-column",children:[t.jsx("span",{className:"font-medium",children:(o==null?void 0:o.to)||"-"}),t.jsx("small",{className:"text-600",children:(o==null?void 0:o.landlordName)||"-"})]}),E=o=>{var H;return t.jsxs("div",{className:"flex flex-column",children:[t.jsx("span",{className:"font-medium",children:o!=null&&o.filename?o.filename:"-"}),t.jsx("small",{className:"text-600",title:o==null?void 0:o.kind,children:(o==null?void 0:o.label)||(o==null?void 0:o.kind)||"-"}),(H=o==null?void 0:o.email)!=null&&H.messageId?t.jsxs("small",{className:"text-600",children:["msg: ",ie(o.email.messageId,10,8)]}):null]})},F=o=>t.jsxs("div",{className:"flex flex-column",children:[t.jsx("span",{className:"font-medium",children:(o==null?void 0:o.address)||"-"}),t.jsxs("small",{className:"text-600",children:["Landlord: ",(o==null?void 0:o.landlordName)||"-"]})]}),z=o=>{var k;const H=(k=o==null?void 0:o.status)==null?void 0:k.state,I=!!(o!=null&&o.blob);return t.jsxs("div",{className:"flex gap-2 justify-content-end",children:[t.jsx(v,{rounded:!0,label:"TestEmail",text:!0,disabled:!c||!M,onClick:()=>{M(o)},tooltip:c?"Click to send a test email to "+c:"Please connect to gmail first",tooltipOptions:{position:"top",showOnDisabled:!0}}),t.jsx(v,{rounded:!0,label:"Preview",text:!0,disabled:!c||!I||!$,onClick:()=>{$({...o})},tooltip:c?I?"Click to preview":"No PDF file to preview":"Please connect to gmail first",tooltipOptions:{position:"top",showOnDisabled:!0}}),t.jsx(v,{icon:"pi pi-download",rounded:!0,text:!0,disabled:!O||!I,onClick:()=>O==null?void 0:O(o),tooltip:I?"Download PDF":"No PDF file yet",tooltipOptions:{position:"top",showOnDisabled:!0}}),t.jsx(v,{icon:"pi pi-send",rounded:!0,text:!0,disabled:!B||!c,onClick:()=>B==null?void 0:B(o),tooltip:c?H=="sent"?"Re-send this email":"Send this email":"Please connect to gmail first",tooltipOptions:{position:"top",showOnDisabled:!0}})]})};return t.jsxs(X,{visible:e,onHide:n,header:D,style:{width:"90vw"},modal:!0,closable:!1,children:[t.jsxs(xe,{value:g,dataKey:"id",selection:j,onSelectionChange:o=>C(o.value),selectionMode:"checkbox",isDataSelectable:o=>{var H,I;return!["sent","pending"].includes((I=(H=o==null?void 0:o.data)==null?void 0:H.status)==null?void 0:I.state)},stripedRows:!0,size:"small",paginator:!0,currentPageReportTemplate:"{first} to {last} of {totalRecords}",paginatorTemplate:"FirstPageLink PrevPageLink CurrentPageReport NextPageLink LastPageLink RowsPerPageDropdown",rowsPerPageOptions:[5,10,25,50,100],rows:10,emptyMessage:"No queued emails.",scrollable:!0,scrollHeight:"55vh",children:[t.jsx(U,{selectionMode:"multiple",headerStyle:{width:"3rem"}}),t.jsx(U,{header:"Status",body:N,style:{minWidth:180}}),t.jsx(U,{header:"Recipient",body:R,style:{minWidth:220}}),t.jsx(U,{header:"Property",body:F,style:{minWidth:260}}),t.jsx(U,{header:"File",body:E,style:{minWidth:260}}),t.jsx(U,{header:"",body:z,style:{width:110}})]},c?"gmail-on":"gmail-off"),t.jsx("div",{className:"flex justify-content-end gap-2 mt-3",children:t.jsx(v,{label:"Close",outlined:!0,onClick:n})})]})}const Dt=({id:e,blob:n,filename:l,to:a,landlordName:d,address:f,propertyID:c,kind:g,label:x,createdAt:w,status:b,email:S})=>({id:e??"",blob:n??null,filename:l??"",to:a??"",landlordName:d??"",address:f??"",propertyID:c??"",kind:g??null,label:x??"",createdAt:w??"",status:b??{state:"pending",error:null,sentAt:null},email:S??{messageId:null}}),Ke=e=>{switch(e){case"sent":return{severity:"success",label:"Sent",icon:"pi pi-check"};case"sending":return{severity:"info",label:"Sending",icon:"pi pi-spin pi-spinner"};case"ready":return{severity:"warning",label:"Ready",icon:"pi pi-file"};case"building":return{severity:"info",label:"Building",icon:"pi pi-spin pi-spinner"};case"failed":return{severity:"danger",label:"Failed",icon:"pi pi-times"};case"pending":default:return{severity:"secondary",label:"Pending",icon:"pi pi-clock"}}},ie=(e,n=18,l=10)=>e?e.length<=n+l+3?e:`${e.slice(0,n)}...${e.slice(-l)}`:"",G=e=>{if(e==null||e==="")return"";const n=String(e);return n.includes("$")?n:`$${n}`},Ze=e=>{if(e==null||e==="")return"";const n=Number(e);return Number.isFinite(n)?n.toFixed(2):String(e)},oe="#6cb6e7",re="white",Je="grey",r=ye.create({page:{paddingTop:10,paddingBottom:10,paddingHorizontal:34,fontFamily:"Helvetica",fontSize:10,color:"#111",lineHeight:1.25},logoWrap:{alignItems:"center",marginBottom:4},logo:{height:70,objectFit:"contain"},h5:{fontSize:14,fontWeight:550,textAlign:"center",marginTop:2,marginBottom:6},h6:{fontSize:10,textAlign:"center",marginTop:1},phoneWebRow:{marginTop:2,alignItems:"center"},website:{fontSize:9,marginTop:3,color:oe,textDecoration:"none"},tagline:{fontSize:10,textAlign:"center",marginTop:2,fontStyle:"italic"},spacerBr:{height:10},sectionBar:{backgroundColor:oe,paddingVertical:6,paddingHorizontal:10,marginTop:12},sectionBarText:{fontSize:10,fontWeight:700,color:"white"},dataBlock:{paddingHorizontal:10,paddingTop:4},row:{flexDirection:"row",marginTop:4},rowText:{flexDirection:"row",flexWrap:"wrap"},label:{fontWeight:700},value:{},halfRow:{flexDirection:"row",marginTop:4,marginBottom:2},halfCol:{width:"50%",paddingRight:6},thirdRow:{flexDirection:"row",marginTop:6},thirdCol:{width:"33.33%",paddingRight:6},inlineText:{flexDirection:"row",flexWrap:"wrap",fontSize:10},twoColWrap:{flexDirection:"row",marginTop:10},col:{flex:1},colLeft:{marginRight:5},colRight:{marginLeft:5},simpleRow:{flexDirection:"row",justifyContent:"space-between",paddingVertical:5,paddingHorizontal:10,borderColor:Je,borderBottomWidth:1},simpleRowLast:{borderBottomWidth:0,marginTop:4},amountBold:{fontWeight:700},table:{borderWidth:1,borderColor:re,marginTop:0},tableRow:{flexDirection:"row",borderBottomWidth:1,borderBottomColor:re,minHeight:22},tableHeaderRow:{backgroundColor:"#f3f6fb"},tableCell:{paddingVertical:5,paddingHorizontal:6,fontSize:9.5,flexWrap:"wrap"},tableHeaderText:{fontWeight:700},colDate:{flex:.5,textAlign:"left"},colItem:{flex:2.5,textAlign:"left"},colAmount:{flex:.8,textAlign:"left"}}),be=({label:e,value:n})=>t.jsx(u,{style:r.row,children:t.jsxs(s,{style:r.rowText,children:[t.jsxs(s,{style:r.label,children:[e," "]}),t.jsx(s,{style:r.value,children:n??""})]})}),ee=({title:e})=>t.jsx(u,{style:r.sectionBar,children:t.jsx(s,{style:r.sectionBarText,children:e})}),Xe=({org:e})=>t.jsxs(u,{children:[e!=null&&e.logoSrc?t.jsx(u,{style:r.logoWrap,children:t.jsx(je,{style:r.logo,src:e.logoSrc})}):null,t.jsx(s,{style:r.h5,children:(e==null?void 0:e.name)||"HOMECARE REALTY LTD."}),((e==null?void 0:e.addressLines)||[]).map((n,l)=>t.jsx(s,{style:r.h6,children:n},l)),t.jsxs(u,{style:r.phoneWebRow,children:[e!=null&&e.tel?t.jsxs(s,{style:r.h6,children:["Tel: ",e.tel]}):null,e!=null&&e.website?t.jsx(pe,{src:e.website,style:r.website,children:e.website}):null]}),e!=null&&e.tagline?t.jsx(s,{style:r.tagline,children:e.tagline}):null]}),et=({title:e})=>t.jsx(ee,{title:e||"Landlord Property Monthly Statement"}),tt=({landlord:e})=>t.jsxs(u,{style:r.dataBlock,children:[t.jsxs(u,{style:r.halfRow,children:[t.jsx(u,{style:r.halfCol,children:t.jsxs(s,{style:r.inlineText,children:[t.jsx(s,{style:r.label,children:"Landlord Name: "}),t.jsx(s,{children:(e==null?void 0:e.name)??""})]})}),t.jsx(u,{style:r.halfCol,children:t.jsxs(s,{style:r.inlineText,children:[t.jsx(s,{style:r.label,children:"Landlord Email: "}),t.jsx(s,{children:(e==null?void 0:e.email)??""})]})})]}),t.jsx(be,{label:"Address:",value:e==null?void 0:e.address})]}),nt=({property:e})=>t.jsxs(u,{children:[t.jsx(ee,{title:"Property Information"}),t.jsxs(u,{style:r.dataBlock,children:[t.jsx(be,{label:"Property Address:",value:e==null?void 0:e.address}),t.jsxs(u,{style:r.thirdRow,children:[t.jsx(u,{style:r.thirdCol,children:t.jsxs(s,{style:r.inlineText,children:[t.jsx(s,{style:r.label,children:"Property Manager: "}),t.jsx(s,{children:(e==null?void 0:e.manager)??""})]})}),t.jsx(u,{style:r.thirdCol,children:t.jsxs(s,{style:r.inlineText,children:[t.jsx(s,{style:r.label,children:"Phone: "}),t.jsx(s,{children:(e==null?void 0:e.phone)??""})]})}),t.jsx(u,{style:r.thirdCol,children:t.jsxs(s,{style:r.inlineText,children:[t.jsx(s,{style:r.label,children:"Transaction Date: "}),t.jsx(s,{children:(e==null?void 0:e.transactionDate)??""})]})})]})]})]}),ce=({title:e,data:n})=>{const l=[["Tenant Amount",G(n==null?void 0:n.tenantAmount)],["Agent Amount",G(n==null?void 0:n.agentAmount)],["GST(Agent)",G(n==null?void 0:n.gstAgent)],["CRA Amount",G(n==null?void 0:n.craAmount)],["Maintenance",G(n==null?void 0:n.maintenance)],["Landlord Total:",G(n==null?void 0:n.landlordTotal)]];return t.jsxs(u,{children:[t.jsx(u,{style:[r.sectionBar,{marginTop:0}],children:t.jsx(s,{style:r.sectionBarText,children:e})}),l.map(([a,d],f)=>{const c=a.toLowerCase().includes("total");return t.jsxs(u,{style:[r.simpleRow,f===5&&r.simpleRowLast],children:[t.jsx(s,{style:c?r.amountBold:void 0,children:a}),t.jsx(s,{style:c?r.amountBold:void 0,children:d})]},`${e}-${a}`)})]})},lt=({earnings:e})=>t.jsxs(u,{style:r.twoColWrap,children:[t.jsx(u,{style:[r.col,r.colLeft],children:t.jsx(ce,{title:"Earning Information (Current)",data:e==null?void 0:e.current})}),t.jsx(u,{style:[r.col,r.colRight],children:t.jsx(ce,{title:"Earning Information (Year To Date)",data:e==null?void 0:e.ytd})})]}),st=({rows:e=[]})=>t.jsxs(u,{children:[t.jsx(ee,{title:"Maintenance Details"}),t.jsxs(u,{style:r.table,children:[t.jsxs(u,{style:[r.tableRow,r.tableHeaderRow],children:[t.jsx(s,{style:[r.tableCell,r.colDate,r.tableHeaderText],children:"Date"}),t.jsx(s,{style:[r.tableCell,r.colItem,r.tableHeaderText],children:"Item"}),t.jsx(s,{style:[r.tableCell,r.colAmount,r.tableHeaderText],children:"Amount (incl. GST)"})]}),e.length===0?t.jsx(u,{style:r.tableRow,children:t.jsx(s,{style:[r.tableCell,{flex:1}],children:"No maintenance records"})}):e.map((n,l)=>t.jsxs(u,{style:r.tableRow,wrap:!1,children:[t.jsx(s,{style:[r.tableCell,r.colDate],children:(n==null?void 0:n.date)??""}),t.jsx(s,{style:[r.tableCell,r.colItem],children:(n==null?void 0:n.item)??""}),t.jsxs(s,{style:[r.tableCell,r.colAmount],children:["$",Ze(n==null?void 0:n.amountInclGst)]})]},l))]})]});function Nt({data:e}){const n=(e==null?void 0:e.org)||{},l=(e==null?void 0:e.landlord)||{},a=(e==null?void 0:e.property)||{},d=(e==null?void 0:e.earnings)||{},f=Array.isArray(e==null?void 0:e.maintenanceDetails)?e.maintenanceDetails:[];return t.jsx(fe,{children:t.jsxs(ge,{size:"A4",style:r.page,children:[t.jsx(Xe,{org:n}),t.jsx(et,{title:e==null?void 0:e.title}),t.jsx(tt,{landlord:l}),t.jsx(nt,{property:a}),t.jsx(lt,{earnings:d}),t.jsx(st,{rows:f})]})})}const Mt=({statement_date:e,tenant_name:n,rent_start:l,rent_end:a,tenant_amount:d,agent_amount:f,cra_amount:c,maintenance_amount:g,landlord_amount:x})=>({statement_date:e??"",tenant_name:n??"",rent_start:l??"",rent_end:a??"",tenant_amount:d??"",agent_amount:f??"",cra_amount:c??"",maintenance_amount:g??"",landlord_amount:x??""}),Bt=({date:e,item:n,amount:l})=>({date:e??"",item:n??"",amountInclGst:l??0}),Pt=({title:e,year:n,landlord_name:l,landlord_address:a,landlord_email:d,property_address:f,property_manager:c,property_phone:g,property_transactionDate:x,monthly_record:w,maintenance_record:b})=>({org:Ve(),title:e??"Landlord Property Annual Statement",landlord:{name:l??"",address:a??"",email:d??""},property:{address:f??"",manager:c??"",phone:g??"",transactionDate:x??""},year:n??"",monthly_record:w??[],maintenanceDetails:b??[]}),W=e=>{if(e==null||e==="")return"";const n=String(e);return n.includes("$")?n:`$${n}`},at=e=>{if(e==null||e==="")return"";const n=Number(e);return Number.isFinite(n)?n.toFixed(2):String(e)},Q=e=>e==null||e===""?"-":String(e),de="#6cb6e7",it="#efefef",me="white",i=ye.create({page:{paddingTop:10,paddingBottom:10,paddingHorizontal:24,fontFamily:"Helvetica",fontSize:9,color:"#111",lineHeight:1.25},logoWrap:{alignItems:"center",marginBottom:4},logo:{height:70,objectFit:"contain"},h5:{fontSize:14,fontWeight:550,textAlign:"center",marginTop:2,marginBottom:6},h6:{fontSize:10,textAlign:"center",marginTop:1},phoneWebRow:{marginTop:2,alignItems:"center"},website:{fontSize:9,marginTop:3,color:de,textDecoration:"none"},tagline:{fontSize:10,textAlign:"center",marginTop:2,fontStyle:"italic"},spacerBr:{height:10},sectionBar:{backgroundColor:de,paddingVertical:6,paddingHorizontal:10,marginTop:12},sectionBarText:{fontSize:10,fontWeight:700,color:"white"},dataBlock:{paddingHorizontal:10,paddingTop:4},row:{flexDirection:"row",marginTop:4},rowText:{flexDirection:"row",flexWrap:"wrap"},label:{fontWeight:700},value:{},halfRow:{flexDirection:"row",marginTop:4,marginBottom:2},halfCol:{width:"50%",paddingRight:6},thirdRow:{flexDirection:"row",marginTop:6},thirdCol:{width:"33.33%",paddingRight:6},inlineText:{flexDirection:"row",flexWrap:"wrap",fontSize:10},twoColWrap:{flexDirection:"row",marginTop:10},col:{flex:1},colLeft:{marginRight:5},colRight:{marginLeft:5},monthlyHeaderRow:{flexDirection:"row",backgroundColor:it},monthlyRow:{flexDirection:"row"},monthlyHMCell:{width:"11%",padding:4,fontFamily:"Helvetica-Bold",textAlign:"center"},monthlyHTCell:{width:"20%",padding:4,fontFamily:"Helvetica-Bold",textAlign:"center"},monthlyHCell:{width:"11%",padding:4,fontFamily:"Helvetica-Bold",textAlign:"center"},monthlyHMMCell:{width:"14%",padding:4,fontFamily:"Helvetica-Bold",textAlign:"center"},monthlyHLLAmt:{width:"14%",padding:4,fontFamily:"Helvetica-Bold",textAlign:"center"},monthlyMCell:{width:"11%",padding:4,textAlign:"center"},monthlyTCell:{width:"20%",padding:4,textAlign:"center"},monthlyCell:{width:"11%",padding:4,textAlign:"center"},monthlyMMCell:{width:"14%",padding:4,textAlign:"center"},monthlyLLAmt:{width:"14%",padding:4,textAlign:"center"},monthlySummaryRow:{borderTopWidth:1,borderTopColor:"grey",marginTop:4,paddingTop:4,fontFamily:"Helvetica-Bold"},table:{borderWidth:1,borderColor:me,marginTop:0},tableRow:{flexDirection:"row",borderBottomWidth:1,borderBottomColor:me,minHeight:22},tableHeaderRow:{backgroundColor:"#f3f6fb"},tableCell:{paddingVertical:5,paddingHorizontal:6,fontSize:9.5,flexWrap:"wrap"},tableHeaderText:{fontWeight:700},colDate:{flex:.5,textAlign:"left"},colItem:{flex:2.5,textAlign:"left"},colAmount:{flex:.8,textAlign:"left"}}),ot=({label:e,value:n})=>t.jsx(u,{style:i.row,children:t.jsxs(s,{style:i.inlineText,children:[t.jsxs(s,{style:i.label,children:[e," "]}),t.jsx(s,{style:i.value,children:n??""})]})}),te=({title:e})=>t.jsx(u,{style:i.sectionBar,children:t.jsx(s,{style:i.sectionBarText,children:e})}),rt=({org:e})=>t.jsxs(u,{children:[e!=null&&e.logoSrc?t.jsx(u,{style:i.logoWrap,children:t.jsx(je,{style:i.logo,src:e.logoSrc})}):null,t.jsx(s,{style:i.h5,children:(e==null?void 0:e.name)||"HOMECARE REALTY LTD."}),((e==null?void 0:e.addressLines)||[]).map((n,l)=>t.jsx(s,{style:i.h6,children:n},l)),t.jsxs(u,{style:i.phoneWebRow,children:[e!=null&&e.tel?t.jsxs(s,{style:i.h6,children:["Tel: ",e.tel]}):null,e!=null&&e.website?t.jsx(pe,{src:e.website,style:i.website,children:e.website}):null]}),e!=null&&e.tagline?t.jsx(s,{style:i.tagline,children:e.tagline}):null]}),ct=({title:e})=>t.jsx(te,{title:e||"Landlord Property Yearly Statement"}),dt=({landlord:e,property:n})=>t.jsxs(u,{style:i.dataBlock,children:[t.jsx(ot,{label:"Property Address:",value:e==null?void 0:e.address}),t.jsxs(u,{style:i.halfRow,children:[t.jsx(u,{style:i.halfCol,children:t.jsxs(s,{style:i.inlineText,children:[t.jsx(s,{style:i.label,children:"Landlord Name: "}),t.jsx(s,{children:(e==null?void 0:e.name)??""})]})}),t.jsx(u,{style:i.halfCol,children:t.jsxs(s,{style:i.inlineText,children:[t.jsx(s,{style:i.label,children:"Landlord Email: "}),t.jsx(s,{children:(e==null?void 0:e.email)??""})]})})]}),t.jsxs(u,{style:i.thirdRow,children:[t.jsx(u,{style:i.halfCol,children:t.jsxs(s,{style:i.inlineText,children:[t.jsx(s,{style:i.label,children:"Property Manager: "}),t.jsx(s,{children:(n==null?void 0:n.manager)??"-"})]})}),t.jsx(u,{style:i.halfCol,children:t.jsxs(s,{style:i.inlineText,children:[t.jsx(s,{style:i.label,children:"Phone: "}),t.jsx(s,{children:(n==null?void 0:n.phone)??"-"})]})})]})]}),mt=({rows:e=[]})=>t.jsxs(u,{children:[t.jsx(te,{title:"Maintenance Details"}),t.jsxs(u,{style:i.table,children:[t.jsxs(u,{style:[i.tableRow,i.tableHeaderRow],children:[t.jsx(s,{style:[i.tableCell,i.colDate,i.tableHeaderText],children:"Date"}),t.jsx(s,{style:[i.tableCell,i.colItem,i.tableHeaderText],children:"Item"}),t.jsx(s,{style:[i.tableCell,i.colAmount,i.tableHeaderText],children:"Amount (incl. GST)"})]}),e.length===0?t.jsx(u,{style:i.tableRow,children:t.jsx(s,{style:[i.tableCell,{flex:1}],children:"No maintenance records"})}):e.map((n,l)=>t.jsxs(u,{style:i.tableRow,wrap:!1,children:[t.jsx(s,{style:[i.tableCell,i.colDate],children:(n==null?void 0:n.date)??""}),t.jsx(s,{style:[i.tableCell,i.colItem],children:(n==null?void 0:n.item)??""}),t.jsxs(s,{style:[i.tableCell,i.colAmount],children:["$",at(n==null?void 0:n.amountInclGst)]})]},l))]})]}),ht=({rows:e=[]})=>{const n=e.reduce((l,a)=>(l.tenant+=Number(a.tenant_amount||0),l.agent+=Number(a.agent_amount||0),l.cra+=Number(a.cra_amount||0),l.maintenance+=Number(a.maintenance_amount||0),l.landlord+=Number(a.landlord_amount||0),l),{tenant:0,agent:0,cra:0,maintenance:0,landlord:0});return t.jsxs(u,{children:[t.jsx(te,{title:"Monthly Earning Information"}),t.jsxs(u,{style:i.table,children:[t.jsxs(u,{style:i.monthlyHeaderRow,children:[t.jsx(s,{style:i.monthlyHMCell,children:"Month"}),t.jsx(s,{style:i.monthlyHTCell,children:"Tenant"}),t.jsx(s,{style:i.monthlyHCell,children:"Start Date"}),t.jsx(s,{style:i.monthlyHCell,children:"End Date"}),t.jsx(s,{style:i.monthlyHCell,children:"Tenant Amount"}),t.jsx(s,{style:i.monthlyHCell,children:"Agent Amount"}),t.jsx(s,{style:i.monthlyHCell,children:"CRA Amount"}),t.jsx(s,{style:i.monthlyHMMCell,children:"Maintenance Amount"}),t.jsx(s,{style:i.monthlyHLLAmt,children:"Landload Amount"})]}),e.map((l,a)=>t.jsxs(u,{style:i.monthlyRow,children:[t.jsx(s,{style:i.monthlyMCell,children:Q(l.statement_date)}),t.jsx(s,{style:i.monthlyTCell,children:Q(l.tenant_name)}),t.jsx(s,{style:i.monthlyCell,children:Q(l.rent_start)}),t.jsx(s,{style:i.monthlyCell,children:Q(l.rent_end)}),t.jsx(s,{style:i.monthlyCell,children:W(l.tenant_amount)}),t.jsx(s,{style:i.monthlyCell,children:W(l.agent_amount)}),t.jsx(s,{style:i.monthlyCell,children:W(l.cra_amount)}),t.jsx(s,{style:i.monthlyMMCell,children:W(l.maintenance_amount)}),t.jsx(s,{style:i.monthlyLLAmt,children:W(l.landlord_amount)})]},a)),t.jsxs(u,{style:[i.monthlyRow,i.monthlySummaryRow],children:[t.jsx(s,{style:i.monthlyMCell,children:"Total"}),t.jsx(s,{style:i.monthlyTCell}),t.jsx(s,{style:i.monthlyCell}),t.jsx(s,{style:i.monthlyCell}),t.jsx(s,{style:i.monthlyCell,children:W(V(n.tenant))}),t.jsx(s,{style:i.monthlyCell,children:W(V(n.agent))}),t.jsx(s,{style:i.monthlyCell,children:W(V(n.cra))}),t.jsx(s,{style:i.monthlyMMCell,children:W(V(n.maintenance))}),t.jsx(s,{style:i.monthlyLLAmt,children:W(V(n.landlord))})]})]})]})};function Et({data:e}){const n=(e==null?void 0:e.org)||{},l=(e==null?void 0:e.landlord)||{},a=(e==null?void 0:e.property)||{};e!=null&&e.earnings;const d=Array.isArray(e==null?void 0:e.maintenanceDetails)?e.maintenanceDetails:[],f=Array.isArray(e==null?void 0:e.monthly_record)?e.monthly_record:[];return t.jsx(fe,{children:t.jsxs(ge,{size:"A4",style:i.page,children:[t.jsx(rt,{org:n}),t.jsx(ct,{title:e==null?void 0:e.title}),t.jsx(dt,{landlord:l,property:a}),t.jsx(ht,{rows:f}),t.jsx(mt,{rows:d})]})})}export{Mt as A,wt as D,At as E,xt as F,Lt as G,ft as H,Bt as M,gt as P,Dt as a,jt as b,Ct as c,pt as d,vt as e,St as f,Ye as g,Rt as h,V as i,Pt as j,yt as k,Et as l,Nt as m,Ue as n,Ve as o,bt as r,Tt as s,Ie as u};
